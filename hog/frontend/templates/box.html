{% extends "_base.html" %}

{% block content %}
<script>
$(document).ready(function() {
  function convertData(data) {
    data = $.map(data['results'], function(a) {
      var d = new Date(a['observed_at']).getTime();
       return [[d, a['measurement']]];
     });
   return data;
  };
  url = '/api/measurements/?box={{ box.code }}&measurement_type=in_temp&page_size=1000',
  $.getJSON(url, function (data) {
    // Create the chart
    Highcharts.stockChart('container', {


        rangeSelector: {
            selected: 1
        },

        title: {
            text: 'Temperatures'
        },
        series: [{
            name: 'Temp',
            data: convertData(data),
            tooltip: {
                valueDecimals: 1
            }
        }]
    });
  });
});;

</script>
<h1>Box: {{ box.name }}</h1>
<div class="container">
  <div class="row">
    <div class="col">
      <div id="container" style="width:100%; height:400px;">Loading...</div>
    </div>
  </div>
</div>
{% endblock %}
